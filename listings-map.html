<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apartamente cu Harta | Summer Smile</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>
    <style>
        body { overflow: hidden; height: 100vh; }
        .top-search { background: white; padding: 15px 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); position: fixed; top: 70px; left: 0; right: 0; z-index: 99; }
        .search-container { max-width: 1400px; margin: 0 auto; display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .search-input-group { display: flex; align-items: center; background: #f5f5f5; border-radius: 30px; padding: 0 20px; flex: 1; min-width: 250px; }
        .search-input-group input { border: none; background: transparent; padding: 12px 10px; font-size: 0.95rem; flex: 1; outline: none; }
        .filter-buttons { display: flex; gap: 10px; flex-wrap: wrap; }
        .filter-btn { padding: 10px 20px; background: #f5f5f5; border: 1px solid #e0e0e0; border-radius: 25px; font-size: 0.9rem; cursor: pointer; }
        .filter-btn:hover { background: #e8e8e8; }
        .filter-dropdown { position: relative; display: inline-block; }
        .filter-dropdown-content { display: none; position: absolute; top: 100%; left: 0; background: white; min-width: 250px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); border-radius: 12px; padding: 15px; z-index: 1000; margin-top: 8px; }
        .filter-dropdown-content.show { display: block; }
        .filter-dropdown-content h4 { margin: 0 0 12px; font-size: 0.95rem; color: #1a2334; }
        .filter-option { display: flex; align-items: center; gap: 10px; padding: 8px 0; }
        .filter-option input { width: 18px; height: 18px; }
        .price-range { display: flex; gap: 10px; align-items: center; }
        .price-range input { width: 100px; padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; }
        .guest-counter { display: flex; align-items: center; justify-content: space-between; padding: 10px 0; }
        .counter-controls { display: flex; align-items: center; gap: 12px; }
        .counter-btn { width: 32px; height: 32px; border: 1px solid #ddd; border-radius: 50%; background: white; cursor: pointer; font-size: 1.2rem; }
        .counter-value { font-weight: 600; min-width: 30px; text-align: center; }
        .apply-filter-btn { width: 100%; padding: 10px; background: linear-gradient(135deg, #DAA520, #FFD700); border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin-top: 10px; }
        .split-container { display: flex; height: calc(100vh - 140px); margin-top: 140px; }
        .listings-panel { width: 60%; overflow-y: auto; padding: 20px; background: #f8f9fa; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 0 10px; }
        .panel-header h2 { font-size: 1.3rem; color: #1a2334; }
        .results-count { font-size: 0.9rem; color: #666; margin-left: 10px; }
        .list-cards { display: flex; flex-direction: column; gap: 16px; }
        .list-card { display: flex; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.06); transition: all 0.3s ease; cursor: pointer; }
        .list-card:hover { box-shadow: 0 8px 25px rgba(0,0,0,0.12); transform: translateX(4px); }
        .list-card.highlighted { box-shadow: 0 0 0 3px #FFD700; }
        .list-card.hidden { display: none; }
        .list-card-image { width: 280px; min-width: 280px; position: relative; overflow: hidden; }
        .list-card-image img { width: 100%; height: 100%; object-fit: cover; }
        .list-card-image .favorite-btn { position: absolute; top: 12px; right: 12px; background: rgba(255,255,255,0.9); border: none; width: 34px; height: 34px; border-radius: 50%; cursor: pointer; font-size: 16px; }
        .list-card-image .favorite-btn.active { color: #e74c3c; }
        .list-card-badge { position: absolute; top: 12px; left: 12px; background: linear-gradient(135deg, #DAA520, #FFD700); color: #1a2334; padding: 5px 10px; border-radius: 5px; font-size: 0.7rem; font-weight: 600; }
        .list-card-content { flex: 1; padding: 18px; display: flex; flex-direction: column; }
        .list-card-top { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .list-card-type { font-size: 0.8rem; color: #888; text-transform: uppercase; }
        .list-card-rating { display: flex; align-items: center; gap: 4px; }
        .list-card-rating .star { color: #FFB400; }
        .list-card-rating .score { font-weight: 600; }
        .list-card-rating .count { color: #888; }
        .list-card-title { font-size: 1.15rem; font-weight: 600; color: #1a2334; margin: 0 0 6px; }
        .list-card-location { font-size: 0.9rem; color: #666; margin-bottom: 12px; }
        .list-card-specs { display: flex; gap: 15px; font-size: 0.85rem; color: #555; margin-bottom: 12px; }
        .list-card-amenities { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: auto; }
        .amenity-tag { background: #f5f5f5; padding: 4px 10px; border-radius: 12px; font-size: 0.75rem; color: #555; }
        .list-card-footer { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 12px; padding-top: 12px; border-top: 1px solid #eee; }
        .list-card-price .amount { font-size: 1.3rem; font-weight: 700; color: #1a2334; }
        .list-card-price .period { font-size: 0.85rem; color: #888; }
        .list-card-cta { padding: 10px 24px; background: linear-gradient(135deg, #DAA520, #FFD700); color: #1a2334; border: none; border-radius: 25px; font-weight: 600; cursor: pointer; }
        .map-panel { width: 40%; position: relative; background: #e8e8e8; }
        #map { width: 100%; height: 100%; }
        .no-results { text-align: center; padding: 40px 20px; color: #666; display: none; }
        .clear-filters-btn { padding: 10px 20px; background: #1a2334; color: white; border: none; border-radius: 25px; cursor: pointer; margin-top: 15px; }
        @media (max-width: 1024px) { .split-container { flex-direction: column-reverse; } .listings-panel, .map-panel { width: 100%; } .map-panel { height: 300px; } .list-card { flex-direction: column; } .list-card-image { width: 100%; height: 200px; } }
    </style>
</head>
<body>
    <header><nav><div class="logo"><h1>Summer Smile</h1></div>
    <ul class="nav-links" id="navLinks"><li><a href="index.html">Acasa</a></li><li><a href="oradea.html">Oradea</a></li><li><a href="mamaia.html">Mamaia Nord</a></li><li><a href="listings-map.html" class="active">Harta</a></li><li><a href="index.html#contact">Contact</a></li></ul>
    </nav></header>

    <div class="top-search"><div class="search-container">
        <div class="search-input-group"><span>&#128269;</span><input type="text" id="searchInput" placeholder="Cauta..." oninput="filterProperties()"></div>
        <div class="filter-buttons">
            <div class="filter-dropdown"><button class="filter-btn" onclick="toggleDropdown('priceDropdown')">&#128176; Pret</button>
                <div class="filter-dropdown-content" id="priceDropdown"><h4>Pret (RON/noapte)</h4><div class="price-range"><input type="number" id="priceMin" placeholder="Min"><span>-</span><input type="number" id="priceMax" placeholder="Max"></div><button class="apply-filter-btn" onclick="filterProperties();toggleDropdown('priceDropdown')">Aplica</button></div></div>
            <div class="filter-dropdown"><button class="filter-btn" onclick="toggleDropdown('guestsDropdown')">&#128101; Oaspeti</button>
                <div class="filter-dropdown-content" id="guestsDropdown"><h4>Oaspeti</h4><div class="guest-counter"><span>Oaspeti</span><div class="counter-controls"><button class="counter-btn" onclick="changeGuests(-1)">-</button><span class="counter-value" id="guestCount">0</span><button class="counter-btn" onclick="changeGuests(1)">+</button></div></div><button class="apply-filter-btn" onclick="filterProperties();toggleDropdown('guestsDropdown')">Aplica</button></div></div>
            <div class="filter-dropdown"><button class="filter-btn" onclick="toggleDropdown('typeDropdown')">&#127968; Tip</button>
                <div class="filter-dropdown-content" id="typeDropdown"><h4>Tip</h4><div class="filter-option"><input type="checkbox" id="typeApartament" onchange="filterProperties()"><label>Apartament</label></div><div class="filter-option"><input type="checkbox" id="typeVila" onchange="filterProperties()"><label>Vila</label></div><div class="filter-option"><input type="checkbox" id="typeStudio" onchange="filterProperties()"><label>Studio</label></div></div></div>
            <div class="filter-dropdown"><button class="filter-btn" onclick="toggleDropdown('amenitiesDropdown')">&#9881; Facilitati</button>
                <div class="filter-dropdown-content" id="amenitiesDropdown"><h4>Facilitati</h4><div class="filter-option"><input type="checkbox" id="amenityWifi" onchange="filterProperties()"><label>WiFi</label></div><div class="filter-option"><input type="checkbox" id="amenityParcare" onchange="filterProperties()"><label>Parcare</label></div><div class="filter-option"><input type="checkbox" id="amenityAC" onchange="filterProperties()"><label>AC</label></div><div class="filter-option"><input type="checkbox" id="amenityPiscina" onchange="filterProperties()"><label>Piscina</label></div></div></div>
            <button class="filter-btn" onclick="clearAllFilters()" style="background:#e74c3c;color:white;border-color:#e74c3c;">&#10006; Sterge</button>
        </div>
    </div></div>

    <div class="split-container">
        <div class="listings-panel">
            <div class="panel-header"><h2>Proprietati <span class="results-count" id="resultsCount">(0)</span></h2></div>
            <div class="list-cards" id="propertyList">
                <div style="text-align:center;padding:40px;color:#666;">
                    <h3>Viziteaza paginile dedicate</h3>
                    <p style="margin:20px 0;">Proprietatile noastre sunt organizate pe locatii:</p>
                    <div style="display:flex;gap:20px;justify-content:center;flex-wrap:wrap;margin-top:30px;">
                        <a href="oradea.html" style="padding:15px 30px;background:linear-gradient(135deg,#DAA520,#FFD700);color:#1a2334;text-decoration:none;border-radius:25px;font-weight:600;">Oradea</a>
                        <a href="mamaia.html" style="padding:15px 30px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;text-decoration:none;border-radius:25px;font-weight:600;">Mamaia Nord</a>
                    </div>
                </div>
            </div>
            <div class="no-results" id="noResults"><h3>Nicio proprietate</h3><button class="clear-filters-btn" onclick="clearAllFilters()">Sterge filtre</button></div>
        </div>
        <div class="map-panel"><div id="map"></div></div>
    </div>

    <script src="translations.js"></script>
    <script>
        const properties = [];
        let map,markers=[],infoWindow,guestCount=0;
        function initMap(){map=new google.maps.Map(document.getElementById('map'),{zoom:6,center:{lat:45.5,lng:25}});infoWindow=new google.maps.InfoWindow();properties.forEach(p=>addMarker(p));if(markers.length){const b=new google.maps.LatLngBounds();markers.forEach(m=>b.extend(m.marker.getPosition()));map.fitBounds(b);}}
        function addMarker(p){const m=new google.maps.Marker({position:{lat:p.lat,lng:p.lng},map:map,title:p.name,label:{text:p.price+' RON',color:'#1a2334',fontWeight:'bold'}});m.addListener('click',()=>{highlightCard(p.id);infoWindow.setContent('<b>'+p.name+'</b><br>'+p.price+' RON');infoWindow.open(map,m);});markers.push({marker:m,property:p});}
        function highlightCard(n){document.querySelectorAll('.list-card').forEach(c=>c.classList.remove('highlighted'));const c=document.querySelector('.list-card[data-marker="'+n+'"]');if(c){c.classList.add('highlighted');c.scrollIntoView({behavior:'smooth',block:'center'});}}
        function toggleDropdown(id){document.querySelectorAll('.filter-dropdown-content').forEach(d=>{if(d.id!==id)d.classList.remove('show');});document.getElementById(id).classList.toggle('show');}
        document.addEventListener('click',e=>{if(!e.target.closest('.filter-dropdown'))document.querySelectorAll('.filter-dropdown-content').forEach(d=>d.classList.remove('show'));});
        function changeGuests(d){guestCount=Math.max(0,guestCount+d);document.getElementById('guestCount').textContent=guestCount;}
        function filterProperties(){const s=document.getElementById('searchInput').value.toLowerCase(),pMin=parseInt(document.getElementById('priceMin').value)||0,pMax=parseInt(document.getElementById('priceMax').value)||999999,types=[],amen=[];
            if(document.getElementById('typeApartament').checked)types.push('apartament');if(document.getElementById('typeVila').checked)types.push('vila');if(document.getElementById('typeStudio').checked)types.push('studio');
            if(document.getElementById('amenityWifi').checked)amen.push('wifi');if(document.getElementById('amenityParcare').checked)amen.push('parcare');if(document.getElementById('amenityAC').checked)amen.push('ac');if(document.getElementById('amenityPiscina').checked)amen.push('piscina');
            let cnt=0;document.querySelectorAll('.list-card').forEach(c=>{const p=parseInt(c.dataset.price),g=parseInt(c.dataset.guests),t=c.dataset.type,a=c.dataset.amenities.split(','),n=c.dataset.name,l=c.dataset.location;let show=true;
                if(s&&!n.includes(s)&&!l.includes(s))show=false;if(p<pMin||p>pMax)show=false;if(guestCount>0&&g<guestCount)show=false;if(types.length&&!types.includes(t))show=false;if(amen.length&&!amen.every(x=>a.includes(x)))show=false;
                c.classList.toggle('hidden',!show);if(show)cnt++;const m=markers.find(x=>x.property.id==c.dataset.marker);if(m)m.marker.setVisible(show);});
            document.getElementById('resultsCount').textContent='('+cnt+')';document.getElementById('noResults').style.display=cnt?'none':'block';document.getElementById('propertyList').style.display=cnt?'flex':'none';}
        function clearAllFilters(){document.getElementById('searchInput').value='';document.getElementById('priceMin').value='';document.getElementById('priceMax').value='';guestCount=0;document.getElementById('guestCount').textContent='0';document.querySelectorAll('.filter-dropdown-content input[type="checkbox"]').forEach(c=>c.checked=false);filterProperties();}
        function toggleFavorite(b){b.classList.toggle('active');b.innerHTML=b.classList.contains('active')?'&#9829;':'&#9825;';}
        window.addEventListener('load',()=>{if(typeof google==='undefined')document.getElementById('map').innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;flex-direction:column;padding:20px;text-align:center;"><h3>Google Maps</h3><p>Adauga API Key pentru harta</p><a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank" style="color:#DAA520;">Obtine API Key</a></div>';});
    </script>
</body>
</html>